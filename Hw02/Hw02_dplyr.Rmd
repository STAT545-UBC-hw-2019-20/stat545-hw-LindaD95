---
title: "Assignment 2"
output: 
  html_document: 
    keep_md: true 
editor_options: 
  chunk_output_type: inline
---

```{r allow errors, echo = FALSE}
knitr::opts_chunk$set(error = TRUE)
```

```{r load packages, warning = FALSE, message = FALSE}
# load your packages here:
library(gapminder)
library(tidyverse)
``` 

## Exercise 1: Basic dplyr

#### Exercise 1.2 

Use filter() to subset the gapminder data to three countries of your choice in the 1970’s.

```{r} 
gapminder %>%
filter(country %in%  c("Australia", "Canada", "Germany")) %>% 
  group_by(country) %>% 
  slice(5:6) # could not get filter to select both 1972 and 1977, points for creativity?  
```

#### Exercise 1.2 

Use the pipe operator %>% to select “country” and “gdpPercap” from your filtered dataset in 1.1 

```{r} 
gapminder %>%
filter(country %in%  c("Australia", "Canada", "Germany")) %>% 
  group_by(country) %>% 
  slice(5:6) %>%
  select(country, year, gdpPercap) 
```

#### Exercise 1.3 

Filter gapminder to all entries that have experienced a drop in life expectancy. 

delta_lifeExp is the change in life exptancy from 3 years prior to the the value in the year column. 

``` {r} 

gapminder %>% 
  mutate(lifeExp, lag_lifeExp = lag(lifeExp)) %>% 
  mutate(lifeExp, delta_lifeExp = lifeExp - lag_lifeExp) %>%
  select(country, year, delta_lifeExp) %>%
  drop_na(delta_lifeExp)
  
```

The data was then sorted to display the countries that experienced the largest drop in life expectancy from 2002 to 2007 at the top of the table. 

``` {r}
gapminder %>% 
  mutate(lifeExp, lag_lifeExp = lag(lifeExp)) %>% 
  mutate(lifeExp, delta_lifeExp = lifeExp - lag_lifeExp) %>%
  filter(delta_lifeExp < 0) %>%
  arrange(-desc(delta_lifeExp)) %>% 
  select(country, year, delta_lifeExp) %>%
  drop_na(delta_lifeExp)
```

``` {r}
gapminder %>% 
  mutate(lifeExp, lag_lifeExp = lag(lifeExp)) %>% 
  mutate(lifeExp, delta_lifeExp = lifeExp - lag_lifeExp) %>%
   filter(year == 2007) %>%
  arrange(-desc(delta_lifeExp)) %>%  
  select(country, year, delta_lifeExp) %>%
  drop_na(delta_lifeExp)
```

# maybe only display change in life_exp 

### Exercise 1.4 

Filter gapminder so that it shows the max GDP per capita experienced by each country. 

``` {r}
gapminder %>% 
  group_by(country) %>%
  filter(gdpPercap == max(gdpPercap))
```

### Exercise 1.5 

Produce a scatterplot of Canada’s life expectancy vs. GDP per capita using ggplot()

```{r}
gapminder %>%
  filter(country == 'Canada') %>%
  ggplot(aes(lifeExp, log(gdpPercap))) +
  geom_point()
# want to add labels corresonding to the year for each point 
``` 

# Exercise 2 
### Categorical Variable Exploration 

The 2 categorical variables are 'country' and 'continent' 

Explore the countries of Asia and how the gdpPerCap has changed from the years of 1997 to 2007 

``` {r}
gapminder %>% 
  filter(continent == 'Asia') %>%
  filter(year >= 1997) %>% 
  group_by(country) %>% 
  mutate(gdpPercap, prev_gdpPercap, 2)
```

Using just the year 2007 

``` {r}
gapminder %>% 
  filter(continent == 'Asia') %>%
  filter(year == 2007) %>% 
  arrange(desc(gdpPercap))
```
  
